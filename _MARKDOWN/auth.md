<a href="../index.html" class="link-a079aa82--primary-53a25e66--logoLink-10d08504"></a>

<img src="https://gblobscdn.gitbook.com/orgs%2F-LxuH0qSm4xO9nWfEBlB%2Favatar.png?alt=media" class="image-67b14f24--avatar-1c1d03ec" />

<span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1--spaceNameText-677c2969">Everything curl</span>

<a href="../index.html" class="link-a079aa82--primary-53a25e66--logoLink-10d08504"></a>

<img src="https://gblobscdn.gitbook.com/orgs%2F-LxuH0qSm4xO9nWfEBlB%2Favatar.png?alt=media" class="image-67b14f24--avatar-1c1d03ec" />

<span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1--spaceNameText-677c2969">Everything curl</span>

<a href="../index.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Introduction</span></a>

<a href="../how-to-read.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">How to read this book</span></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">The cURL project</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Get curl</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Open Source</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">The source code</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Network and protocols</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Command line basics</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Using curl</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">How to HTTP with curl</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">libcurl basics</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">HTTP with libcurl</span>

<a href="responses.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">HTTP responses</span></a>

<a href="requests.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">HTTP requests</span></a>

<a href="versions.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">HTTP versions</span></a>

<a href="ranges.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">HTTP ranges</span></a>

<a href="auth.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca--navButtonOpened-6a88552e"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">HTTP authentication</span></a>

<a href="cookies.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Cookies with libcurl</span></a>

<a href="download.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Download</span></a>

<a href="upload.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Upload</span></a>

<a href="../bindings.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Bindings</span></a>

<a href="../internals.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">libcurl internals</span></a>

<a href="../bookindex.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Index</span></a>

<a href="https://www.gitbook.com/?utm_source=content&amp;utm_medium=trademark&amp;utm_campaign=curl-1" class="reset-3c756112--trademark-a8da4b94"></a>

<span class="text-4505230f--TextH200-a3425406--textUIFamily-5ebd8e40">Powered by **GitBook**</span>

# <span class="text-4505230f--DisplayH900-bfb998fa--textContentFamily-49a318e1">HTTP authentication</span>

<span class="text-4505230f--UIH300-2063425d--textUIFamily-5ebd8e40--text-8ee2c8b2"></span>

<span class="text-4505230f--UIH300-2063425d--textUIFamily-5ebd8e40--text-8ee2c8b2"></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="3bf9f4f9dacd4ebdbdb3bf90926b8af9"><span data-offset-key="3bf9f4f9dacd4ebdbdb3bf90926b8af9:0">libcurl supports a wide variety of HTTP authentication schemes.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="b173ca0076e7433ab87a9aa01c3060a1"><span data-offset-key="b173ca0076e7433ab87a9aa01c3060a1:0">Note that this way of authentication is different than the otherwise widely used scheme on the web today where authentication is performed by a HTTP POST and then keeping state in cookies. See </span></span><a href="cookies.html" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="ac04aad958a94013ad2605300b3f471b"><span data-offset-key="ac04aad958a94013ad2605300b3f471b:0">Cookies with libcurl</span></span></a><span data-key="5424feda844f43dfb0e490f48b77b768"><span data-offset-key="5424feda844f43dfb0e490f48b77b768:0"> for details on how to do that.</span></span></span>

<span class="text-4505230f--HeadingH700-04e1a2a3--textContentFamily-49a318e1"><span data-key="72335ad42bef4f009a927f97968ff4f8"><span data-offset-key="72335ad42bef4f009a927f97968ff4f8:0">User name and password</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="09224d43279e41e3be662ba4832756c6"><span data-offset-key="09224d43279e41e3be662ba4832756c6:0">libcurl will not try any HTTP authentication without a given user name. Set one like:</span></span></span>

    curl_easy_setopt(curl, CURLOPT_USERNAME, "joe");

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="d8f3dd28ed2240a288ca6150102c8945"><span data-offset-key="d8f3dd28ed2240a288ca6150102c8945:0">and of course most authentications also require a set password that you set separately:</span></span></span>

    curl_easy_setopt(curl, CURLOPT_PASSWORD, "secret");

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="ddcb2541008244d2814ed8d9fb84e6ad"><span data-offset-key="ddcb2541008244d2814ed8d9fb84e6ad:0">That's all you need. This will make libcurl switch on its default authentication method for this transfer: </span><span data-offset-key="ddcb2541008244d2814ed8d9fb84e6ad:1">_HTTP Basic_</span><span data-offset-key="ddcb2541008244d2814ed8d9fb84e6ad:2">.</span></span></span>

<span class="text-4505230f--HeadingH700-04e1a2a3--textContentFamily-49a318e1"><span data-key="f2b9cbc49c06479bb65f6ce12f6e9898"><span data-offset-key="f2b9cbc49c06479bb65f6ce12f6e9898:0">Authentication required</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="ac55b491a4c04003bbf680ec629b2aca"><span data-offset-key="ac55b491a4c04003bbf680ec629b2aca:0">A client does not itself decide that it wants to send an authenticated request. It is something the server requires. When the server has a resource that is protected and requires authentication, it will respond with a 401 HTTP response and a </span><span data-offset-key="ac55b491a4c04003bbf680ec629b2aca:1">`WWW-Authenticate:`</span><span data-offset-key="ac55b491a4c04003bbf680ec629b2aca:2"> header. The header will include details about what specific authentication methods it accepts for that resource.</span></span></span>

<span class="text-4505230f--HeadingH700-04e1a2a3--textContentFamily-49a318e1"><span data-key="a7829b87a88b41b6b723a595db3e2683"><span data-offset-key="a7829b87a88b41b6b723a595db3e2683:0">Basic</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="4df317c44b604186af73082c798abd3a"><span data-offset-key="4df317c44b604186af73082c798abd3a:0">Basic is the default HTTP authentication method and as its name suggests, it is indeed basic. It takes the name and the password, separates them with a colon and base64 encodes that string before it puts the entire thing into a </span><span data-offset-key="4df317c44b604186af73082c798abd3a:1">`Authorization:`</span><span data-offset-key="4df317c44b604186af73082c798abd3a:2"> HTTP header in the request.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="ffddab0501c249a689123c30c4648a71"><span data-offset-key="ffddab0501c249a689123c30c4648a71:0">If the name and password is set like the examples shown above, the exact outgoing header looks like this:</span></span></span>

    Authorization: Basic am9lOnNlY3JldA==

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="b6b5488a218d404aba194b394aaee147"><span data-offset-key="b6b5488a218d404aba194b394aaee147:0">This authentication method is totally insecure over HTTP as the credentials will then be sent in plain-text over the network.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="f386ea3b12274de893d79dc7124c396e"><span data-offset-key="f386ea3b12274de893d79dc7124c396e:0">You can explicitly tell libcurl to use Basic method for a specific transfer like this:</span></span></span>

    curl_easy_setopt(curl, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);

<span class="text-4505230f--HeadingH700-04e1a2a3--textContentFamily-49a318e1"><span data-key="7f18170baea043188006302174fdcf43"><span data-offset-key="7f18170baea043188006302174fdcf43:0">Digest</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="e904eb654f4342ec92029f7df987993e"><span data-offset-key="e904eb654f4342ec92029f7df987993e:0">Another HTTP authentication method is called Digest. One advantage this method has compared to Basic, is that it does not send the password over the wire in plain text. This is however an authentication method that is rarely spoken by browsers and consequently is not a frequently used one.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="98909022c7d44e71990be2d872a98d3c"><span data-offset-key="98909022c7d44e71990be2d872a98d3c:0">You can explicitly tell libcurl to use the Digest method for a specific transfer like this (it still needs user name and password set as well):</span></span></span>

    curl_easy_setopt(curl, CURLOPT_HTTPAUTH, CURLAUTH_DIGEST);

<span class="text-4505230f--HeadingH700-04e1a2a3--textContentFamily-49a318e1"><span data-key="7dbf4c70f1dc45169107282cb5bd036e"><span data-offset-key="7dbf4c70f1dc45169107282cb5bd036e:0">NTLM</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="4894b0b17b6d461d8a01a4adedd2e636"><span data-offset-key="4894b0b17b6d461d8a01a4adedd2e636:0">Another HTTP authentication method is called NTLM.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="50b4d9f62a234184b79291958a1b14f6"><span data-offset-key="50b4d9f62a234184b79291958a1b14f6:0">You can explicitly tell libcurl to use the NTLM method for a specific transfer like this (it still needs user name and password set as well):</span></span></span>

    curl_easy_setopt(curl, CURLOPT_HTTPAUTH, CURLAUTH_NTLM);

<span class="text-4505230f--HeadingH700-04e1a2a3--textContentFamily-49a318e1"><span data-key="a288a893bc77435e8468bc82138b808f"><span data-offset-key="a288a893bc77435e8468bc82138b808f:0">Negotiate</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="305fb01b38da486bb33cd293efcc0d03"><span data-offset-key="305fb01b38da486bb33cd293efcc0d03:0">Another HTTP authentication method is called Negotiate.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="bb3fae4df00941f7b37a20ccce5b32f9"><span data-offset-key="bb3fae4df00941f7b37a20ccce5b32f9:0">You can explicitly tell libcurl to use the Negotiate method for a specific transfer like this (it still needs user name and password set as well):</span></span></span>

    curl_easy_setopt(curl, CURLOPT_HTTPAUTH, CURLAUTH_NEGOTIATE);

<span class="text-4505230f--HeadingH700-04e1a2a3--textContentFamily-49a318e1"><span data-key="21026589379b4574af2af832ba062771"><span data-offset-key="21026589379b4574af2af832ba062771:0">Bearer</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="ba277f9ae8264e288121f20e6007a449"><span data-offset-key="ba277f9ae8264e288121f20e6007a449:0">TBD</span></span></span>

<span class="text-4505230f--HeadingH700-04e1a2a3--textContentFamily-49a318e1"><span data-key="23cd4c1c3dbc43ae8abcf6e2c76b659e"><span data-offset-key="23cd4c1c3dbc43ae8abcf6e2c76b659e:0">Try-first</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="51f22afd182f4c31a241d675a8eea337"><span data-offset-key="51f22afd182f4c31a241d675a8eea337:0">Some HTTP servers allow one out of several authentication methods, in some cases you will find yourself in a position where you as a client does not want or is not able to select a single specific method before-hand and for yet another subset of cases your application does not know if the requested URL even require authentication or not!</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="e5ac29e77a3344f897ea6650745d2767"><span data-offset-key="e5ac29e77a3344f897ea6650745d2767:0">libcurl covers all these situations as well.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="98c625400bf54eda8064a3a771c2caef"><span data-offset-key="98c625400bf54eda8064a3a771c2caef:0">You can ask libcurl to use more than one method, and when doing so, you imply that curl first tries the request without any authentication at all and then based on the HTTP response coming back, it selects one of the methods that both the server and your application allow. If more than one would work, curl will pick them in a order based on how secure the methods are considered to be, picking the safest of the available methods.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="2655a72b24fa4e3c8c6a5d2dc2f36ff0"><span data-offset-key="2655a72b24fa4e3c8c6a5d2dc2f36ff0:0">Tell libcurl to accept multiple method by bitwise ORing them like this:</span></span></span>

    curl_easy_setopt(curl, CURLOPT_HTTPAUTH, CURLAUTH_BASIC | CURLAUTH_DIGEST);

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="3d4c9888582a41a2bd2bb4e59868f18b"><span data-offset-key="3d4c9888582a41a2bd2bb4e59868f18b:0">If you want libcurl to only allow a single specific method but still want it to probe first to check if it can possibly still make the request without the use of authentication, you can force that behavior by adding </span><span data-offset-key="3d4c9888582a41a2bd2bb4e59868f18b:1">`CURLAUTH_ONLY`</span><span data-offset-key="3d4c9888582a41a2bd2bb4e59868f18b:2"> to the bitmask.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="0f3793d5d79445958ed753bdade1bc73"><span data-offset-key="0f3793d5d79445958ed753bdade1bc73:0">Ask to use digest, but nothing else but digest, and only if proven really necessary:</span></span></span>

    curl_easy_setopt(curl, CURLOPT_HTTPAUTH, CURLAUTH_DIGEST | CURLAUTH_ONLY);

<a href="ranges.html" class="reset-3c756112--card-6570f064--whiteCard-fff091a4--cardPrevious-56a5e674"></a>

<span class="text-4505230f--TextH200-a3425406--textContentFamily-49a318e1">Previous</span>

<span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1">HTTP ranges</span>

<a href="cookies.html" class="reset-3c756112--card-6570f064--whiteCard-fff091a4--cardNext-19241c42"></a>

<span class="text-4505230f--TextH200-a3425406--textContentFamily-49a318e1">Next</span>

<span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1">Cookies with libcurl</span>

<img src="https://avatars.githubusercontent.com/u/66654881?v=4" class="image-67b14f24--avatar-1c1d03ec" />

<span class="text-4505230f--TextH200-a3425406--textContentFamily-49a318e1">Last updated 8 months ago</span>

<span class="text-4505230f--UIH300-2063425d--textUIFamily-5ebd8e40">Export as PDF</span>

<span class="text-4505230f--InfoH100-1e92e1d1--textContentFamily-49a318e1">Contents</span>

<a href="auth.html#user-name-and-password" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024"></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1"><span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1">User name and password</span></span>

<a href="auth.html#authentication-required" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024"></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1"><span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1">Authentication required</span></span>

<a href="auth.html#basic" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024"></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1"><span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1">Basic</span></span>

<a href="auth.html#digest" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024"></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1"><span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1">Digest</span></span>

<a href="auth.html#ntlm" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024"></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1"><span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1">NTLM</span></span>

<a href="auth.html#negotiate" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024"></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1"><span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1">Negotiate</span></span>

<a href="auth.html#bearer" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024"></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1"><span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1">Bearer</span></span>

<a href="auth.html#try-first" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024"></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1"><span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1">Try-first</span></span>
