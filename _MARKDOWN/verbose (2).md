<a href="../index.html" class="link-a079aa82--primary-53a25e66--logoLink-10d08504"></a>

<img src="https://gblobscdn.gitbook.com/orgs%2F-LxuH0qSm4xO9nWfEBlB%2Favatar.png?alt=media" class="image-67b14f24--avatar-1c1d03ec" />

<span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1--spaceNameText-677c2969">Everything curl</span>

<a href="../index.html" class="link-a079aa82--primary-53a25e66--logoLink-10d08504"></a>

<img src="https://gblobscdn.gitbook.com/orgs%2F-LxuH0qSm4xO9nWfEBlB%2Favatar.png?alt=media" class="image-67b14f24--avatar-1c1d03ec" />

<span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1--spaceNameText-677c2969">Everything curl</span>

<a href="../index.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Introduction</span></a>

<a href="../how-to-read.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">How to read this book</span></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">The cURL project</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Get curl</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Open Source</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">The source code</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Network and protocols</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Command line basics</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Using curl</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">How to HTTP with curl</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">libcurl basics</span>

<a href="easyhandle.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Easy handle</span></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Drive transfers</span>

<a href="connectionreuse.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Connection reuse</span></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Callbacks</span>

<a href="cleanup.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Cleanup</span></a>

<a href="names.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Name resolving</span></a>

<a href="proxies.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Proxies</span></a>

<a href="getinfo.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Post transfer info</span></a>

<a href="sharing.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Share data between handles</span></a>

<a href="url.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">URL API</span></a>

<a href="api.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">API compatibility</span></a>

<a href="libcurl.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">--libcurl</span></a>

<a href="headers.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Header files</span></a>

<a href="globalinit.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Global initialization</span></a>

<a href="threading.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">multi-threading</span></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">curl easy options</span>

<a href="curlcode.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">CURLcode return codes</span></a>

<a href="verbose.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca--navButtonOpened-6a88552e"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Verbose operations</span></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">libcurl examples</span>

<a href="cplusplus.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">for C++ programmers</span></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">HTTP with libcurl</span>

<a href="../bindings.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Bindings</span></a>

<a href="../internals.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">libcurl internals</span></a>

<a href="../bookindex.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Index</span></a>

<a href="https://www.gitbook.com/?utm_source=content&amp;utm_medium=trademark&amp;utm_campaign=curl-1" class="reset-3c756112--trademark-a8da4b94"></a>

<span class="text-4505230f--TextH200-a3425406--textUIFamily-5ebd8e40">Powered by **GitBook**</span>

# <span class="text-4505230f--DisplayH900-bfb998fa--textContentFamily-49a318e1">Verbose operations</span>

<span class="text-4505230f--UIH300-2063425d--textUIFamily-5ebd8e40--text-8ee2c8b2"></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="3b589314f60741d8baf9287abfa04238"><span data-offset-key="3b589314f60741d8baf9287abfa04238:0">Okay, we just showed how to get the error as a human readable text as that is an excellent help to figure out what went wrong in a particular transfer and often explains why it can be done like that or what the problem is for the moment.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="4cc3f68d245c447a9c976b18ae007f15"><span data-offset-key="4cc3f68d245c447a9c976b18ae007f15:0">The next lifesaver when writing libcurl applications that everyone needs to know about and needs to use extensively, at least while developing libcurl applications or debugging libcurl itself, is to enable "verbose mode" with </span><span data-offset-key="4cc3f68d245c447a9c976b18ae007f15:1">`CURLOPT_VERBOSE`</span><span data-offset-key="4cc3f68d245c447a9c976b18ae007f15:2">:</span></span></span>

    CURLcode ret = curl_easy_setopt(handle, CURLOPT_VERBOSE, 1L);

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="2928b525da0f439ca8653304caf517ea"><span data-offset-key="2928b525da0f439ca8653304caf517ea:0">When libcurl is told to be verbose it will mention transfer-related details and information to stderr while the transfer is ongoing. This is awesome to figure out why things fail and to learn exactly what libcurl does when you ask it different things. You can redirect the output elsewhere by changing stderr with </span><span data-offset-key="2928b525da0f439ca8653304caf517ea:1">`CURLOPT_STDERR`</span><span data-offset-key="2928b525da0f439ca8653304caf517ea:2"> or you can get even more info in a fancier way with the debug callback (explained further in a later section).</span></span></span>

<span class="text-4505230f--HeadingH700-04e1a2a3--textContentFamily-49a318e1"><span data-key="0a5486661de24e9589652db3491bc1f0"><span data-offset-key="0a5486661de24e9589652db3491bc1f0:0">Trace everything</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="2122a5589ac8417d926a748f38208239"><span data-offset-key="2122a5589ac8417d926a748f38208239:0">Verbose is certainly fine, but sometimes you need more. libcurl also offers a trace callback that in addition to showing you all the stuff the verbose mode does, it also passes on </span><span data-offset-key="2122a5589ac8417d926a748f38208239:1">_all_</span><span data-offset-key="2122a5589ac8417d926a748f38208239:2"> data sent and received so that your application gets a full trace of everything.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="75608cc17320408197a4ad4bd1819c8a"><span data-offset-key="75608cc17320408197a4ad4bd1819c8a:0">The sent and received data passed to the trace callback is given to the callback in its unencrypted form, which can be handy when working with TLS or SSH based protocols when capturing the data off the network for debugging is not practical.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="05501dbb05514259ac86b50953817fc4"><span data-offset-key="05501dbb05514259ac86b50953817fc4:0">When you set the </span><span data-offset-key="05501dbb05514259ac86b50953817fc4:1">`CURLOPT_DEBUGFUNCTION`</span><span data-offset-key="05501dbb05514259ac86b50953817fc4:2"> option, you still need to have </span><span data-offset-key="05501dbb05514259ac86b50953817fc4:3">`CURLOPT_VERBOSE`</span><span data-offset-key="05501dbb05514259ac86b50953817fc4:4"> enabled but with the trace callback set libcurl will use that callback instead of its internal handling.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="0e4b72c2b9174381b59c5e828375e0ad"><span data-offset-key="0e4b72c2b9174381b59c5e828375e0ad:0">The trace callback should match a prototype like this:</span></span></span>

    int my_trace(CURL *handle, curl_infotype type, char *ptr, size_t size,             void *userp);

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="191f0be642154b94b17cec62225abaee"><span data-offset-key="191f0be642154b94b17cec62225abaee:0">**handle**</span><span data-offset-key="191f0be642154b94b17cec62225abaee:1"> is the easy handle it concerns, </span><span data-offset-key="191f0be642154b94b17cec62225abaee:2">**type**</span><span data-offset-key="191f0be642154b94b17cec62225abaee:3"> describes the particular data passed to the callback (data in/out, header in/out, TLS data in/out and "text"), </span><span data-offset-key="191f0be642154b94b17cec62225abaee:4">**ptr**</span><span data-offset-key="191f0be642154b94b17cec62225abaee:5"> points to the data being </span><span data-offset-key="191f0be642154b94b17cec62225abaee:6">**size**</span><span data-offset-key="191f0be642154b94b17cec62225abaee:7"> number of bytes. </span><span data-offset-key="191f0be642154b94b17cec62225abaee:8">**userp**</span><span data-offset-key="191f0be642154b94b17cec62225abaee:9"> is the custom pointer you set with </span><span data-offset-key="191f0be642154b94b17cec62225abaee:10">`CURLOPT_DEBUGDATA`</span><span data-offset-key="191f0be642154b94b17cec62225abaee:11">.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="5e786cfa9bbb482599980c4566545d0f"><span data-offset-key="5e786cfa9bbb482599980c4566545d0f:0">The data pointed to by </span><span data-offset-key="5e786cfa9bbb482599980c4566545d0f:1">**ptr**</span><span data-offset-key="5e786cfa9bbb482599980c4566545d0f:2"> </span><span data-offset-key="5e786cfa9bbb482599980c4566545d0f:3">_will not_</span><span data-offset-key="5e786cfa9bbb482599980c4566545d0f:4"> be zero terminated, but will be exactly of the size as told by the </span><span data-offset-key="5e786cfa9bbb482599980c4566545d0f:5">**size**</span><span data-offset-key="5e786cfa9bbb482599980c4566545d0f:6"> argument.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="10d0c4f5376149868a97c8519527b364"><span data-offset-key="10d0c4f5376149868a97c8519527b364:0">The callback must return 0 or libcurl will consider it an error and abort the transfer.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="2856d7a8613d44e89680b738c1ae97e4"><span data-offset-key="2856d7a8613d44e89680b738c1ae97e4:0">On the curl web site, we host an example called </span></span><a href="https://curl.se/libcurl/c/debug.html" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="48cda95e3cc045d8bb6e34311e4120ec"><span data-offset-key="48cda95e3cc045d8bb6e34311e4120ec:0">debug.c</span></span></a><span data-key="0db2401960774322a9c9d3da178823f4"><span data-offset-key="0db2401960774322a9c9d3da178823f4:0"> that includes a simple trace function to get inspiration from.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="3f15ffb430604de28057d0c93f6f08df"><span data-offset-key="3f15ffb430604de28057d0c93f6f08df:0">There are also additional details in the </span></span><a href="https://curl.se/libcurl/c/CURLOPT_DEBUGFUNCTION.html" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="d68d9f6c907f470c80088fb4a06fb9c0"><span data-offset-key="d68d9f6c907f470c80088fb4a06fb9c0:0">CURLOPT_DEBUGFUNCTION man page</span></span></a><span data-key="b6befe3b18b84c5c91f9007204137cd4"><span data-offset-key="b6befe3b18b84c5c91f9007204137cd4:0">.</span></span></span>

<a href="curlcode.html" class="reset-3c756112--card-6570f064--whiteCard-fff091a4--cardPrevious-56a5e674"></a>

<span class="text-4505230f--TextH200-a3425406--textContentFamily-49a318e1">Previous</span>

<span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1">CURLcode return codes</span>

<a href="examples.html" class="reset-3c756112--card-6570f064--whiteCard-fff091a4--cardNext-19241c42"></a>

<span class="text-4505230f--TextH200-a3425406--textContentFamily-49a318e1">Next</span>

<span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1">libcurl examples</span>

<img src="https://avatars.githubusercontent.com/u/66654881?v=4" class="image-67b14f24--avatar-1c1d03ec" />

<span class="text-4505230f--TextH200-a3425406--textContentFamily-49a318e1">Last updated 8 months ago</span>

<span class="text-4505230f--UIH300-2063425d--textUIFamily-5ebd8e40">Export as PDF</span>
