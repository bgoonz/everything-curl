<a href="basics.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Protocol basics</span>

</a>

<a href="response.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Responses</span>

</a>

<a href="auth.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Authentication</span>

</a>

<a href="ranges.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Ranges</span>

</a>

<a href="versions.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">HTTP versions</span>

</a>

<a href="https.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">HTTPS</span>

</a>

<a href="post.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">HTTP POST</span>

</a>

<a href="multipart.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca--navButtonOpened-6a88552e">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Multipart formposts</span>

</a>

<a href="postvspost.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">-d vs -F</span>

</a>

<a href="redirects.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Redirects</span>

</a>

<a href="requests.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Modify the HTTP request</span>

</a>

<a href="put.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">HTTP PUT</span>

</a>

<a href="cookies.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Cookies</span>

</a>

<a href="http2.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">HTTP/2</span>

</a>

<a href="altsvc.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Alternative Services</span>

</a>

<a href="http3.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">HTTP/3</span>

</a>

<a href="cheatsheet.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">HTTP cheat sheet</span>

</a>

<a href="browserlike.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Scripting browser-like tasks</span>

</a>

# <span class="text-4505230f--DisplayH900-bfb998fa--textContentFamily-49a318e1">Multipart formposts</span>

<span class="text-4505230f--UIH300-2063425d--textUIFamily-5ebd8e40--text-8ee2c8b2">

</span>

<span class="text-4505230f--UIH300-2063425d--textUIFamily-5ebd8e40--text-8ee2c8b2">

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="abc0a71e0f494ad29470f3efc69ea248">

<span data-offset-key="abc0a71e0f494ad29470f3efc69ea248:0">A multipart formpost is what an HTTP client sends when an HTML form is submitted with </span>

<span data-offset-key="abc0a71e0f494ad29470f3efc69ea248:1">_enctype_</span>

<span data-offset-key="abc0a71e0f494ad29470f3efc69ea248:2"> set to "multipart/form-data". It is an HTTP POST request sent with the request body specially formatted as a series of "parts", separated with MIME boundaries.</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="fbaf589eeeca4f7e9dbf2bb4391dd950">

<span data-offset-key="fbaf589eeeca4f7e9dbf2bb4391dd950:0">An example piece of HTML would look like this:</span>

</span>

</span> <form action="submit.cgi" method="post" enctype="multipart/form-data"> Name: <input type="text" name="person">

<br> File: <input type="file" name="secret">

<br> <input type="submit" value="Submit">

</form>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="5acd196be9ea4cb1800a4aca840707df">

<span data-offset-key="5acd196be9ea4cb1800a4aca840707df:0">Which could look something like this in a web browser:</span>

</span>

</span>

<figure>

<img src="https://gblobscdn.gitbook.com/assets%2F-LvW30LMWx5oHe1_SY3L%2F-LvW31Saq-3M0AP13zyD%2F-LvW3IwOpUOwUHyfH0Yg%2Fmultipart-form.png?alt=media" alt="a multipart form" class="image-52799b3c" />

<figcaption>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1" style="max-width:100%">a multipart form</span>

</figcaption>

</figure>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="96c9ed3f89de481083f86d01583eaafc">

<span data-offset-key="96c9ed3f89de481083f86d01583eaafc:0">A user can fill in text in the 'Name' field and by pressing the 'Browse' button a local file can be selected that will be uploaded when 'Submit' is pressed.</span>

</span>

</span>

<span class="text-4505230f--HeadingH700-04e1a2a3--textContentFamily-49a318e1">

<span data-key="ad27165c59aa4f0a96ee1e20afcce3ad">

<span data-offset-key="ad27165c59aa4f0a96ee1e20afcce3ad:0">Sending such a form with curl</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="5cd477cc1e864ee6af17cbd92274b9c6">

<span data-offset-key="5cd477cc1e864ee6af17cbd92274b9c6:0">With curl, you add each separate multipart with one </span>

<span data-offset-key="5cd477cc1e864ee6af17cbd92274b9c6:1">`-F`</span>

<span data-offset-key="5cd477cc1e864ee6af17cbd92274b9c6:2"> (or </span>

<span data-offset-key="5cd477cc1e864ee6af17cbd92274b9c6:3">`--form`</span>

<span data-offset-key="5cd477cc1e864ee6af17cbd92274b9c6:4">) flag and you then continue and add one -F for every input field in the form that you want to send.</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="96845bc6593c4347ab3f815e4acf9095">

<span data-offset-key="96845bc6593c4347ab3f815e4acf9095:0">The above small example form has two parts, one named 'person' that is a plain text field and one named 'secret' that is a file.</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="150a540d0da64f9c851583747b713e9d">

<span data-offset-key="150a540d0da64f9c851583747b713e9d:0">Send your data to that form like this:</span>

</span>

</span> curl -F person=anonymous -F [email protected] http://example.com/submit.cgi<span class="text-4505230f--HeadingH700-04e1a2a3--textContentFamily-49a318e1">

<span data-key="c5a6d4cd18524c7cae97a466d5528954">

<span data-offset-key="c5a6d4cd18524c7cae97a466d5528954:0">The HTTP this generates</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="1daad7a97e6e4f4faac96b967e50555c">

<span data-offset-key="1daad7a97e6e4f4faac96b967e50555c:0">The </span>

<span data-offset-key="1daad7a97e6e4f4faac96b967e50555c:1">**action**</span>

<span data-offset-key="1daad7a97e6e4f4faac96b967e50555c:2"> specifies where the POST is sent. </span>

<span data-offset-key="1daad7a97e6e4f4faac96b967e50555c:3">**method**</span>

<span data-offset-key="1daad7a97e6e4f4faac96b967e50555c:4"> says it is a POST and </span>

<span data-offset-key="1daad7a97e6e4f4faac96b967e50555c:5">**enctype**</span>

<span data-offset-key="1daad7a97e6e4f4faac96b967e50555c:6"> tells us it is a multipart formpost.</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="b85f3f47c9c242ed922fdd44880d4b44">

<span data-offset-key="b85f3f47c9c242ed922fdd44880d4b44:0">With the fields filled in as shown above, curl generates and sends these HTTP request headers to the host example.com:</span>

</span>

</span> POST /submit.cgi HTTP/1.1Host: example.comUser-Agent: curl/7.46.0Accept: */*Content-Length: 313Expect: 100-continueContent-Type: multipart/form-data; boundary=------------------------d74496d66958873e<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="3f9fa23dd6a34759ade93c19fe756a7b">

<span data-offset-key="3f9fa23dd6a34759ade93c19fe756a7b:0">**Content-Length**</span>

<span data-offset-key="3f9fa23dd6a34759ade93c19fe756a7b:1">, of course, tells the server how much data to expect. This example's 313 bytes is really small.</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="0fcdba5596424635a0a8d5dd9e7cd287">

<span data-offset-key="0fcdba5596424635a0a8d5dd9e7cd287:0">The </span>

<span data-offset-key="0fcdba5596424635a0a8d5dd9e7cd287:1">**Expect**</span>

<span data-offset-key="0fcdba5596424635a0a8d5dd9e7cd287:2"> header is explained in the </span>

</span>

<a href="post.html" class="link-a079aa82--primary-53a25e66--link-faf6c434">

<span data-key="80cfd2c8120c40409fe7d48456d53106">

<span data-offset-key="80cfd2c8120c40409fe7d48456d53106:0">HTTP POST</span>

</span>

</a>

<span data-key="cc7401ed246b402e82980b192dd233b8">

<span data-offset-key="cc7401ed246b402e82980b192dd233b8:0"> chapter.</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="22b4139fbd5344ec97095b14f244bfee">

<span data-offset-key="22b4139fbd5344ec97095b14f244bfee:0">The </span>

<span data-offset-key="22b4139fbd5344ec97095b14f244bfee:1">**Content-Type**</span>

<span data-offset-key="22b4139fbd5344ec97095b14f244bfee:2"> header is a bit special. It tells that this is a multipart formpost and then it sets the "boundary" string. The boundary string is a line of characters with a bunch of random digits somewhere in it, that serves as a separator between the different parts of the form that will be submitted. The particular boundary you see in this example has the random part </span>

<span data-offset-key="22b4139fbd5344ec97095b14f244bfee:3">`d74496d66958873e`</span>

<span data-offset-key="22b4139fbd5344ec97095b14f244bfee:4"> but you will, of course, get something different when you run curl (or when you submit such a form with a browser).</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="3dadd41e1480428b934c0403a0a30332">

<span data-offset-key="3dadd41e1480428b934c0403a0a30332:0">So after that initial set of headers follows the request body</span>

</span>

</span> --------------------------d74496d66958873eContent-Disposition: form-data; name="person"​anonymous--------------------------d74496d66958873eContent-Disposition: form-data; name="secret"; filename="file.txt"Content-Type: text/plain​contents of the file--------------------------d74496d66958873e--<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="cd1b9247a1b54bcd8619ed10316f0870">

<span data-offset-key="cd1b9247a1b54bcd8619ed10316f0870:0">Here you clearly see the two parts sent, separated with the boundary strings. Each part starts with one or more headers describing the individual part with its name and possibly some more details. Then after the part's headers come the actual data of the part, without any sort of encoding.</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="d92f83af1948455b8de12480e42eb280">

<span data-offset-key="d92f83af1948455b8de12480e42eb280:0">The last boundary string has two extra dashes </span>

<span data-offset-key="d92f83af1948455b8de12480e42eb280:1">`--`</span>

<span data-offset-key="d92f83af1948455b8de12480e42eb280:2"> appended to signal the end.</span>

</span>

</span>

<span class="text-4505230f--HeadingH700-04e1a2a3--textContentFamily-49a318e1">

<span data-key="f01764c0505e48d081b4a13c89408846">

<span data-offset-key="f01764c0505e48d081b4a13c89408846:0">Content-Type</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="de78f44e15b740ffa6486016888b39d7">

<span data-offset-key="de78f44e15b740ffa6486016888b39d7:0">POSTing with curl's -F option will make it include a default Content-Type header in its request, as shown in the above example. This says </span>

<span data-offset-key="de78f44e15b740ffa6486016888b39d7:1">`multipart/form-data`</span>

<span data-offset-key="de78f44e15b740ffa6486016888b39d7:2"> and then specifies the MIME boundary string. That content-type is the default for multipart formposts but you can, of course, still modify that for your own commands and if you do, curl is clever enough to still append the boundary magic to the replaced header. You cannot really alter the boundary string, since curl needs that for producing the POST stream.</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="aa3e0714ad94491b9e2d59cc23d2cdcf">

<span data-offset-key="aa3e0714ad94491b9e2d59cc23d2cdcf:0">To replace the header, use </span>

<span data-offset-key="aa3e0714ad94491b9e2d59cc23d2cdcf:1">`-H`</span>

<span data-offset-key="aa3e0714ad94491b9e2d59cc23d2cdcf:2"> like this:</span>

</span>

</span> curl -F 'name=Dan' -H 'Content-Type: multipart/magic' https://example.com<span class="text-4505230f--HeadingH700-04e1a2a3--textContentFamily-49a318e1">

<span data-key="ad51efd4cff446a3bf6b4c86e73152b2">

<span data-offset-key="ad51efd4cff446a3bf6b4c86e73152b2:0">Converting an HTML form</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="4fc22213274a4c9b99bf133a4193e703">

<span data-offset-key="4fc22213274a4c9b99bf133a4193e703:0">TBD</span>

</span>

</span>

<a href="post.html" class="reset-3c756112--card-6570f064--whiteCard-fff091a4--cardPrevious-56a5e674">

</a>

<span class="text-4505230f--TextH200-a3425406--textContentFamily-49a318e1">Previous</span>

<span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1">HTTP POST</span>

<a href="postvspost.html" class="reset-3c756112--card-6570f064--whiteCard-fff091a4--cardNext-19241c42">

</a>

<span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1">-d vs -F</span>

<span class="text-4505230f--TextH200-a3425406--textContentFamily-49a318e1">Last updated 1 year ago</span>

<span class="text-4505230f--InfoH100-1e92e1d1--textContentFamily-49a318e1">Contents</span>

<a href="multipart.html#sending-such-a-form-with-curl" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024">

</a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1">

<span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1">Sending such a form with curl</span>

</span>

<a href="multipart.html#the-http-this-generates" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024">

</a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1">

<span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1">The HTTP this generates</span>

</span>

<a href="multipart.html#content-type" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024">

</a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1">

<span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1">Content-Type</span>

</span>

<a href="multipart.html#converting-an-html-form" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024">

</a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1">

<span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1">Converting an HTML form</span>

</span>
