<a href="basics.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Protocol basics</span>

</a>

<a href="response.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Responses</span>

</a>

<a href="auth.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Authentication</span>

</a>

<a href="ranges.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Ranges</span>

</a>

<a href="versions.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">HTTP versions</span>

</a>

<a href="https.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">HTTPS</span>

</a>

<a href="post.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca--navButtonOpened-6a88552e">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">HTTP POST</span>

</a>

<a href="multipart.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Multipart formposts</span>

</a>

<a href="postvspost.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">-d vs -F</span>

</a>

<a href="redirects.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Redirects</span>

</a>

<a href="requests.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Modify the HTTP request</span>

</a>

<a href="put.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">HTTP PUT</span>

</a>

<a href="cookies.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Cookies</span>

</a>

<a href="http2.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">HTTP/2</span>

</a>

<a href="altsvc.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Alternative Services</span>

</a>

<a href="http3.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">HTTP/3</span>

</a>

<a href="cheatsheet.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">HTTP cheat sheet</span>

</a>

<a href="browserlike.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca">

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Scripting browser-like tasks</span>

</a>

# <span class="text-4505230f--DisplayH900-bfb998fa--textContentFamily-49a318e1">HTTP POST</span>

<span class="text-4505230f--UIH300-2063425d--textUIFamily-5ebd8e40--text-8ee2c8b2">

</span>

<span class="text-4505230f--UIH300-2063425d--textUIFamily-5ebd8e40--text-8ee2c8b2">

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="3790be4ee60c46b7b949640009e8c5ba">

<span data-offset-key="3790be4ee60c46b7b949640009e8c5ba:0">POST is the HTTP method that was invented to send data to a receiving web application, and it is how most common HTML forms on the web works. It usually sends a chunk of relatively small amounts of data to the receiver.</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="34b6ca09c44246c6b2013849c52ed36a">

<span data-offset-key="34b6ca09c44246c6b2013849c52ed36a:0">When the data is sent by a browser after data have been filled in a form, it will send it URL encoded, as a serialized name=value pairs separated with ampersand symbols (</span>

<span data-offset-key="34b6ca09c44246c6b2013849c52ed36a:1">`&`</span>

<span data-offset-key="34b6ca09c44246c6b2013849c52ed36a:2">). You send such data with curl's </span>

<span data-offset-key="34b6ca09c44246c6b2013849c52ed36a:3">`-d`</span>

<span data-offset-key="34b6ca09c44246c6b2013849c52ed36a:4"> or </span>

<span data-offset-key="34b6ca09c44246c6b2013849c52ed36a:5">`--data`</span>

<span data-offset-key="34b6ca09c44246c6b2013849c52ed36a:6"> option like this:</span>

</span>

</span>    curl -d 'name=admin&shoesize=12' http://example.com/<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="f1f4431d9efb47febb722cf7a46f6a42">

<span data-offset-key="f1f4431d9efb47febb722cf7a46f6a42:0">When specifying multiple </span>

<span data-offset-key="f1f4431d9efb47febb722cf7a46f6a42:1">`-d`</span>

<span data-offset-key="f1f4431d9efb47febb722cf7a46f6a42:2"> options on the command line, curl will concatenate them and insert ampersands in between, so the above example could also be made like this:</span>

</span>

</span>    curl -d name=admin -d shoesize=12 http://example.com/<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="0b1f2cc6ff444e8991ba92a438025c24">

<span data-offset-key="0b1f2cc6ff444e8991ba92a438025c24:0">If the amount of data to send is not really fit to put in a mere string on the command line, you can also read it off a file name in standard curl style:</span>

</span>

</span>    curl -d @filename http://example.com<span class="text-4505230f--HeadingH700-04e1a2a3--textContentFamily-49a318e1">

<span data-key="84a3d51be06b45a589718c4b6dc6b20e">

<span data-offset-key="84a3d51be06b45a589718c4b6dc6b20e:0">Content-Type</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="48c572a5e64f4a11a62e2c5e67df75b7">

<span data-offset-key="48c572a5e64f4a11a62e2c5e67df75b7:0">POSTing with curl's -d option will make it include a default header that looks like </span>

<span data-offset-key="48c572a5e64f4a11a62e2c5e67df75b7:1">`Content-Type: application/x-www-form-urlencoded`</span>

<span data-offset-key="48c572a5e64f4a11a62e2c5e67df75b7:2">. That's what your typical browser will use for a plain POST.</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="3bbec9bd0ead4d5597d3da7671000c70">

<span data-offset-key="3bbec9bd0ead4d5597d3da7671000c70:0">Many receivers of POST data do not care about or check the Content-Type header.</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="9f820b45abc341e3a29cc3220ebbff32">

<span data-offset-key="9f820b45abc341e3a29cc3220ebbff32:0">If that header is not good enough for you, you should, of course, replace that and instead provide the correct one. Such as if you POST JSON to a server and want to more accurately tell the server about what the content is:</span>

</span>

</span>    curl -d '{json}' -H 'Content-Type: application/json' https://example.com<span class="text-4505230f--HeadingH700-04e1a2a3--textContentFamily-49a318e1">

<span data-key="86f57947a3364c998bcdb10bae2bf1dc">

<span data-offset-key="86f57947a3364c998bcdb10bae2bf1dc:0">POSTing binary</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="ffbe75de313140f1afd5ee8c311fcdba">

<span data-offset-key="ffbe75de313140f1afd5ee8c311fcdba:0">When reading from a file, </span>

<span data-offset-key="ffbe75de313140f1afd5ee8c311fcdba:1">`-d`</span>

<span data-offset-key="ffbe75de313140f1afd5ee8c311fcdba:2"> will strip out carriage return and newlines. Use </span>

<span data-offset-key="ffbe75de313140f1afd5ee8c311fcdba:3">`--data-binary`</span>

<span data-offset-key="ffbe75de313140f1afd5ee8c311fcdba:4"> if you want curl to read and use the given file in binary exactly as given:</span>

</span>

</span>    curl --data-binary @filename http://example.com/<span class="text-4505230f--HeadingH700-04e1a2a3--textContentFamily-49a318e1">

<span data-key="c2471ee0b05a4b8989e3a54b68599972">

<span data-offset-key="c2471ee0b05a4b8989e3a54b68599972:0">URL encoding</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="5cc649a28024498aaa0ce13d9e76c19a">

<span data-offset-key="5cc649a28024498aaa0ce13d9e76c19a:0">Percent-encoding, also known as URL encoding, is technically a mechanism for encoding data so that it can appear in URLs. This encoding is typically used when sending POSTs with the </span>

<span data-offset-key="5cc649a28024498aaa0ce13d9e76c19a:1">`application/x-www-form-urlencoded`</span>

<span data-offset-key="5cc649a28024498aaa0ce13d9e76c19a:2"> content type, such as the ones curl sends with </span>

<span data-offset-key="5cc649a28024498aaa0ce13d9e76c19a:3">`--data`</span>

<span data-offset-key="5cc649a28024498aaa0ce13d9e76c19a:4"> and </span>

<span data-offset-key="5cc649a28024498aaa0ce13d9e76c19a:5">`--data-binary`</span>

<span data-offset-key="5cc649a28024498aaa0ce13d9e76c19a:6"> etc.</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="febf4f5e522844b184ede409607549be">

<span data-offset-key="febf4f5e522844b184ede409607549be:0">The command-line options mentioned above all require that you provide properly encoded data, data you need to make sure already exists in the right format. While that gives you a lot of freedom, it is also a bit inconvenient at times.</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="cc46b777d0be43b1adc8253833ff0a23">

<span data-offset-key="cc46b777d0be43b1adc8253833ff0a23:0">To help you send data you have not already encoded, curl offers the </span>

<span data-offset-key="cc46b777d0be43b1adc8253833ff0a23:1">`--data-urlencode`</span>

<span data-offset-key="cc46b777d0be43b1adc8253833ff0a23:2"> option. This option offers several different ways to URL encode the data you give it.</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="df6a956e726347219cd4457d8036b31b">

<span data-offset-key="df6a956e726347219cd4457d8036b31b:0">You use it like </span>

<span data-offset-key="df6a956e726347219cd4457d8036b31b:1">`--data-urlencode data`</span>

<span data-offset-key="df6a956e726347219cd4457d8036b31b:2"> in the same style as the other --data options. To be CGI-compliant, the </span>

<span data-offset-key="df6a956e726347219cd4457d8036b31b:3">**data**</span>

<span data-offset-key="df6a956e726347219cd4457d8036b31b:4"> part should begin with a name followed by a separator and a content specification. The </span>

<span data-offset-key="df6a956e726347219cd4457d8036b31b:5">**data**</span>

<span data-offset-key="df6a956e726347219cd4457d8036b31b:6"> part can be passed to curl using one of the following syntaxes:</span>

</span>

</span>- <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="e50848c6c7ae4fb0b79edc884cb83c42">

<span data-offset-key="e50848c6c7ae4fb0b79edc884cb83c42:0">`content`</span>

<span data-offset-key="e50848c6c7ae4fb0b79edc884cb83c42:1">: This will make curl URL encode the content and pass that on. Just be careful so that the content does not contain any = or @ symbols, as that will then make the syntax match one of the other cases below!</span>

</span>

</span>- <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="3f0499f76e5943bdb0f978163775549d">

<span data-offset-key="3f0499f76e5943bdb0f978163775549d:0">`=content`</span>

<span data-offset-key="3f0499f76e5943bdb0f978163775549d:1">: This will make curl URL encode the content and pass that on. The initial '=' symbol is not included in the data.</span>

</span>

</span>- <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="5a8a6e0b12fd42128b08d563953714bd">

<span data-offset-key="5a8a6e0b12fd42128b08d563953714bd:0">`name=content`</span>

<span data-offset-key="5a8a6e0b12fd42128b08d563953714bd:1">: This will make curl URL encode the content part and pass that on. Note that the name part is expected to be URL encoded already.</span>

</span>

</span>- <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="47bd96b5a8a34a0f932c41bc7016fb5a">

<span data-offset-key="47bd96b5a8a34a0f932c41bc7016fb5a:0">`@filename`</span>

<span data-offset-key="47bd96b5a8a34a0f932c41bc7016fb5a:1">: This will make curl load data from the given file (including any newlines), URL encode that data and pass it on in the POST.</span>

</span>

</span>- <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="e5253c635d11456b8861482da8946de7">

<span data-offset-key="e5253c635d11456b8861482da8946de7:0">`[email protected]`</span>

<span data-offset-key="e5253c635d11456b8861482da8946de7:1">: This will make curl load data from the given file (including any newlines), URL encode that data and pass it on in the POST. The name part gets an equal sign appended, resulting in name=urlencoded-file-content. Note that the name is expected to be URL encoded already.</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="c7b8d1caf37a4fb5ac95b5d7b06b0c66">

<span data-offset-key="c7b8d1caf37a4fb5ac95b5d7b06b0c66:0">As an example, you could POST a name to have it encoded by curl:</span>

</span>

</span>    curl --data-urlencode "name=John Doe (Junior)" http://example.com<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="7458bb483a1344498e7f6b8ca2608dcd">

<span data-offset-key="7458bb483a1344498e7f6b8ca2608dcd:0">…which would send the following data in the actual request body:</span>

</span>

</span>    name=John%20Doe%20%28Junior%29<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="5eeb64191b1647abbe4cfbe0e74afc07">

<span data-offset-key="5eeb64191b1647abbe4cfbe0e74afc07:0">If you store the string </span>

<span data-offset-key="5eeb64191b1647abbe4cfbe0e74afc07:1">`John Doe (Junior)`</span>

<span data-offset-key="5eeb64191b1647abbe4cfbe0e74afc07:2"> in a file named </span>

<span data-offset-key="5eeb64191b1647abbe4cfbe0e74afc07:3">`contents.txt`</span>

<span data-offset-key="5eeb64191b1647abbe4cfbe0e74afc07:4">, you can tell curl to send that contents URL encoded using the field name 'user' like this:</span>

</span>

</span>    curl --data-urlencode [email protected] http://example.com<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="888303b30c4c4e04b217fa46dd35c658">

<span data-offset-key="888303b30c4c4e04b217fa46dd35c658:0">In both these examples above, the field name is not URL encoded but is passed on as-is. If you want to URL encode the field name as well, like if you want to pass on a field name called </span>

<span data-offset-key="888303b30c4c4e04b217fa46dd35c658:1">`user name`</span>

<span data-offset-key="888303b30c4c4e04b217fa46dd35c658:2">, you can ask curl to encode the entire string by prefixing it with an equals sign (that will not get sent):</span>

</span>

</span>    curl --data-urlencode "=user name=John Doe (Junior)" http://example.com<span class="text-4505230f--HeadingH700-04e1a2a3--textContentFamily-49a318e1">

<span data-key="56ac3f8819f44e9da99559ec62727bff">

<span data-offset-key="56ac3f8819f44e9da99559ec62727bff:0">Convert that to a GET</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="09560f51919a42709ce8c390044782bb">

<span data-offset-key="09560f51919a42709ce8c390044782bb:0">A little convenience feature that could be suitable to mention in this context is the </span>

<span data-offset-key="09560f51919a42709ce8c390044782bb:1">`-G`</span>

<span data-offset-key="09560f51919a42709ce8c390044782bb:2"> or </span>

<span data-offset-key="09560f51919a42709ce8c390044782bb:3">`--get`</span>

<span data-offset-key="09560f51919a42709ce8c390044782bb:4"> option, which takes all data you have specified with the different </span>

<span data-offset-key="09560f51919a42709ce8c390044782bb:5">`-d`</span>

<span data-offset-key="09560f51919a42709ce8c390044782bb:6"> variants and appends that data to the inputted URL e.g. </span>

<span data-offset-key="09560f51919a42709ce8c390044782bb:7">`http://example.com`</span>

<span data-offset-key="09560f51919a42709ce8c390044782bb:8"> separated with a '?' and then makes curl send a GET instead.</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="b87a9766ff61401ba0fd3894ea1b8170">

<span data-offset-key="b87a9766ff61401ba0fd3894ea1b8170:0">This option makes it easy to switch between POSTing and GETing a form, for example.</span>

</span>

</span>

<span class="text-4505230f--HeadingH700-04e1a2a3--textContentFamily-49a318e1">

<span data-key="41c794a738774ed098225bd1a92b320c">

<span data-offset-key="41c794a738774ed098225bd1a92b320c:0">Expect 100-continue</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="3f16e6c1eb8f4aaeaf4ced21f0e99400">

<span data-offset-key="3f16e6c1eb8f4aaeaf4ced21f0e99400:0">HTTP has no proper way to stop an ongoing transfer (in any direction) and still maintain the connection. So, if we figure out that the transfer had better stop after the transfer has started, there are only two ways to proceed: cut the connection and pay the price of reestablishing the connection again for the next request, or keep the transfer going and waste bandwidth but be able to reuse the connection next time.</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="43902fa485744a018d0bc13b96d7a100">

<span data-offset-key="43902fa485744a018d0bc13b96d7a100:0">One example of when this can happen is when you send a large file over HTTP, only to discover that the server requires authentication and immediately sends back a 401 response code.</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="8f433897f38e4048bbb1490f661d3c88">

<span data-offset-key="8f433897f38e4048bbb1490f661d3c88:0">The mitigation that exists to make this scenario less frequent is to have curl pass on an extra header, </span>

<span data-offset-key="8f433897f38e4048bbb1490f661d3c88:1">`Expect: 100-continue`</span>

<span data-offset-key="8f433897f38e4048bbb1490f661d3c88:2">, which gives the server a chance to deny the request before a lot of data is sent off. curl sends this Expect: header by default if the POST it will do is known or suspected to be larger than just minuscule. curl also does this for PUT requests.</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="6279669409cb4c88880b9696822cc0f6">

<span data-offset-key="6279669409cb4c88880b9696822cc0f6:0">When a server gets a request with an 100-continue and deems the request fine, it will respond with a 100 response that makes the client continue. If the server does not like the request, it sends back response code for the error it thinks it is.</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="47a8e2be1b7b474dbd2ba4c1103d6328">

<span data-offset-key="47a8e2be1b7b474dbd2ba4c1103d6328:0">Unfortunately, lots of servers in the world do not properly support the Expect: header or do not handle it correctly, so curl will only wait 1000 milliseconds for that first response before it will continue anyway.</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="332eeeb2905e4769b8bc8f1a40761248">

<span data-offset-key="332eeeb2905e4769b8bc8f1a40761248:0">Those are 1000 wasted milliseconds. You can then remove the use of Expect: from the request and avoid the waiting with </span>

<span data-offset-key="332eeeb2905e4769b8bc8f1a40761248:1">`-H`</span>

<span data-offset-key="332eeeb2905e4769b8bc8f1a40761248:2">:</span>

</span>

</span>    curl -H Expect: -d "payload to send" http://example.com<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="2b6ac4b1e06e4d729af355f0ed0dbed3">

<span data-offset-key="2b6ac4b1e06e4d729af355f0ed0dbed3:0">In some situations, curl will inhibit the use of the Expect header if the content it is about to send is small (like below one kilobyte), as having to waste such a small chunk of data is not considered much of a problem.</span>

</span>

</span>

<span class="text-4505230f--HeadingH700-04e1a2a3--textContentFamily-49a318e1">

<span data-key="791c559832b74e9ba892ea417c90d8e8">

<span data-offset-key="791c559832b74e9ba892ea417c90d8e8:0">Chunked encoded POSTs</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="b13dc9abb351497195332f1d4bc7c788">

<span data-offset-key="b13dc9abb351497195332f1d4bc7c788:0">When talking to a HTTP 1.1 server, you can tell curl to send the request body without a </span>

<span data-offset-key="b13dc9abb351497195332f1d4bc7c788:1">`Content-Length:`</span>

<span data-offset-key="b13dc9abb351497195332f1d4bc7c788:2"> header upfront that specifies exactly how big the POST is. By insisting on curl using chunked Transfer-Encoding, curl will send the POST chunked piece by piece in a special style that also sends the size for each such chunk as it goes along.</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="e8c7875e20d047b1a3fde8c6507ef71b">

<span data-offset-key="e8c7875e20d047b1a3fde8c6507ef71b:0">You send a chunked POST with curl like this:</span>

</span>

</span>    curl -H "Transfer-Encoding: chunked" -d "payload to send" http://example.com<span class="text-4505230f--HeadingH700-04e1a2a3--textContentFamily-49a318e1">

<span data-key="ce3ed03100b546d9b4064dc40600b640">

<span data-offset-key="ce3ed03100b546d9b4064dc40600b640:0">Hidden form fields</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="d390d6474c764db1851d77099924b337">

<span data-offset-key="d390d6474c764db1851d77099924b337:0">This chapter has explained how sending a post with </span>

<span data-offset-key="d390d6474c764db1851d77099924b337:1">`-d`</span>

<span data-offset-key="d390d6474c764db1851d77099924b337:2"> is the equivalent of what a browser does when an HTML form is filled in and submitted.</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="54de9d19db044a5699a13d403f503e2f">

<span data-offset-key="54de9d19db044a5699a13d403f503e2f:0">Submitting such forms is a common operation with curl; effectively, to have curl fill in a web form in an automated fashion.</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="4170774e94864c0faf1386b7b2e8350e">

<span data-offset-key="4170774e94864c0faf1386b7b2e8350e:0">If you want to submit a form with curl and make it look as if it has been done with a browser, it is important to provide all the input fields from the form. A common method for web pages is to set a few hidden input fields to the form and have them assigned values directly in the HTML. A successful form submission, of course, also includes those fields and in order to do that automatically you may be forced to first download the HTML page that holds the form, parse it, and extract the hidden field values so that you can send them off with curl.</span>

</span>

</span>

<span class="text-4505230f--HeadingH700-04e1a2a3--textContentFamily-49a318e1">

<span data-key="97c539dc85db4fbdb38f00a51d44cb50">

<span data-offset-key="97c539dc85db4fbdb38f00a51d44cb50:0">Figure out what a browser sends</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="b02d0cacc0dd4f12b81e0814599fbd51">

<span data-offset-key="b02d0cacc0dd4f12b81e0814599fbd51:0">A common shortcut is to simply fill in the form with your browser and submit it and check in the browser's network development tools exactly what it sent.</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="e1bfe0d58a3a4d80a9e070067c401e35">

<span data-offset-key="e1bfe0d58a3a4d80a9e070067c401e35:0">A slightly different way is to save the HTML page containing the form, and then edit that HTML page to redirect the 'action=' part of the form to your own server or a test server that just outputs exactly what it gets. Completing that form submission will then show you exactly how a browser sends it.</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="e2cd48dc16f549e9a26cab1fe83154a0">

<span data-offset-key="e2cd48dc16f549e9a26cab1fe83154a0:0">A third option is, of course, to use a network capture tool such as Wireshark to check exactly what is sent over the wire. If you are working with HTTPS, you cannot see form submissions in clear text on the wire but instead you need to make sure you can have Wireshark extract your TLS private key from your browser. See the Wireshark documentation for details on doing that.</span>

</span>

</span>

<span class="text-4505230f--HeadingH700-04e1a2a3--textContentFamily-49a318e1">

<span data-key="e826f5cb68ee4cd1950899d11b40ffcf">

<span data-offset-key="e826f5cb68ee4cd1950899d11b40ffcf:0">JavaScript and forms</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="988e7a388ad64dd2a293852575a9a7a2">

<span data-offset-key="988e7a388ad64dd2a293852575a9a7a2:0">A common mitigation against automated agents or scripts using curl is to have the page with the HTML form use JavaScript to set values of some input fields, usually one of the hidden ones. Often, there's some JavaScript code that executes on page load or when the submit button is pressed which sets a magic value that the server then can verify before it considers the submission to be valid.</span>

</span>

</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">

<span data-key="a0ddbe11011540c4bbfcdb0f43d9e35e">

<span data-offset-key="a0ddbe11011540c4bbfcdb0f43d9e35e:0">You can usually work around that by just reading the JavaScript code and redoing that logic in your script. Using the above mentioned tricks to check exactly what a browser sends is then also a good help.</span>

</span>

</span>

<a href="https.html" class="reset-3c756112--card-6570f064--whiteCard-fff091a4--cardPrevious-56a5e674">

</a>

<span class="text-4505230f--TextH200-a3425406--textContentFamily-49a318e1">Previous</span>

<span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1">HTTPS</span>

<a href="multipart.html" class="reset-3c756112--card-6570f064--whiteCard-fff091a4--cardNext-19241c42">

</a>

<span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1">Multipart formposts</span>

<span class="text-4505230f--TextH200-a3425406--textContentFamily-49a318e1">Last updated 5 months ago</span>

<span class="text-4505230f--InfoH100-1e92e1d1--textContentFamily-49a318e1">Contents</span>

<a href="post.html#content-type" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024">

</a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1">

<span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1">Content-Type</span>

</span>

<a href="post.html#posting-binary" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024">

</a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1">

<span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1">POSTing binary</span>

</span>

<a href="post.html#url-encoding" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024">

</a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1">

<span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1">URL encoding</span>

</span>

<a href="post.html#convert-that-to-a-get" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024">

</a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1">

<span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1">Convert that to a GET</span>

</span>

<a href="post.html#expect-100-continue" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024">

</a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1">

<span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1">Expect 100-continue</span>

</span>

<a href="post.html#chunked-encoded-posts" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024">

</a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1">

<span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1">Chunked encoded POSTs</span>

</span>

<a href="post.html#hidden-form-fields" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024">

</a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1">

<span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1">Hidden form fields</span>

</span>

<a href="post.html#figure-out-what-a-browser-sends" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024">

</a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1">

<span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1">Figure out what a browser sends</span>

</span>

<a href="post.html#javascript-and-forms" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024">

</a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1">

<span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1">JavaScript and forms</span>

</span>
