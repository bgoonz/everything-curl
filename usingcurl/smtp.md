<a href="../index.html" class="link-a079aa82--primary-53a25e66--logoLink-10d08504"></a>

<img src="https://gblobscdn.gitbook.com/orgs%2F-LxuH0qSm4xO9nWfEBlB%2Favatar.png?alt=media" class="image-67b14f24--avatar-1c1d03ec" />

<span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1--spaceNameText-677c2969">Everything curl</span>

<a href="../index.html" class="link-a079aa82--primary-53a25e66--logoLink-10d08504"></a>

<img src="https://gblobscdn.gitbook.com/orgs%2F-LxuH0qSm4xO9nWfEBlB%2Favatar.png?alt=media" class="image-67b14f24--avatar-1c1d03ec" />

<span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1--spaceNameText-677c2969">Everything curl</span>

<a href="../index.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Introduction</span></a>

<a href="../how-to-read.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">How to read this book</span></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">The cURL project</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Get curl</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Open Source</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">The source code</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Network and protocols</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Command line basics</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Using curl</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Verbose</span>

<a href="version.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Version</span></a>

<a href="persist.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Persistent connections</span></a>

<a href="downloads.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Downloads</span></a>

<a href="uploads.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Uploads</span></a>

<a href="connections.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Connections</span></a>

<a href="timeouts.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Timeouts</span></a>

<a href="netrc.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">.netrc</span></a>

<a href="proxies.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Proxies</span></a>

<a href="returns.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Exit status</span></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">FTP</span>

<a href="scpsftp.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">SCP and SFTP</span></a>

<a href="reademail.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Reading email</span></a>

<a href="smtp.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca--navButtonOpened-6a88552e"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Sending email</span></a>

<a href="mqtt.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">MQTT</span></a>

<a href="telnet.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">TELNET</span></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">TLS</span>

<a href="copyas.html" class="navButton-94f2579c--pageItemWithChildrenNested-2c5d8183--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Copy as curl</span></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">How to HTTP with curl</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">libcurl basics</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">HTTP with libcurl</span>

<a href="../bindings.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Bindings</span></a>

<a href="../internals.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">libcurl internals</span></a>

<a href="../bookindex.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Index</span></a>

<a href="https://www.gitbook.com/?utm_source=content&amp;utm_medium=trademark&amp;utm_campaign=curl-1" class="reset-3c756112--trademark-a8da4b94"></a>

<span class="text-4505230f--TextH200-a3425406--textUIFamily-5ebd8e40">Powered by **GitBook**</span>

<span class="text-4505230f--DisplayH900-bfb998fa--textContentFamily-49a318e1">Sending email</span>
==================================================================================================

<span class="text-4505230f--UIH300-2063425d--textUIFamily-5ebd8e40--text-8ee2c8b2"></span>

<span class="text-4505230f--UIH300-2063425d--textUIFamily-5ebd8e40--text-8ee2c8b2"></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="97d1147998904d09866fe6278ec3490a"><span data-offset-key="97d1147998904d09866fe6278ec3490a:0">Sending email with curl is done with the SMTP protocol. SMTP stands for </span></span><a href="https://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="c52e072cd8334ee1832d43d57f377e1b"><span data-offset-key="c52e072cd8334ee1832d43d57f377e1b:0">Simple Mail Transfer Protocol</span></span></a><span data-key="e1b2b160937a47a4ab250924957f7768"><span data-offset-key="e1b2b160937a47a4ab250924957f7768:0">.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="2945595dc9d7476d8e897d94c7bc9d5d"><span data-offset-key="2945595dc9d7476d8e897d94c7bc9d5d:0">curl supports sending data to an SMTP server, which combined with the right set of command line options makes an email get sent to a set of receivers of your choice.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="07fbe0beb1324a9abb2c9f6f6a243637"><span data-offset-key="07fbe0beb1324a9abb2c9f6f6a243637:0">When sending SMTP with curl, there are two necessary command line options that </span><span data-offset-key="07fbe0beb1324a9abb2c9f6f6a243637:1">**must**</span><span data-offset-key="07fbe0beb1324a9abb2c9f6f6a243637:2"> be used.</span></span></span>

-   <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="f4941afd67444576aafe036120ed54a9"><span data-offset-key="f4941afd67444576aafe036120ed54a9:0">You need to tell the server at least one recipient with </span><span data-offset-key="f4941afd67444576aafe036120ed54a9:1">`--mail-rcpt`</span><span data-offset-key="f4941afd67444576aafe036120ed54a9:2">. You can use this option several times and then curl will tell the server that all those email addresses should receive the email.</span></span></span>

-   <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="46075eee66f1424da26d72251b0cc2f4"><span data-offset-key="46075eee66f1424da26d72251b0cc2f4:0">You need to tell the server which email address that is the sender of the email with </span><span data-offset-key="46075eee66f1424da26d72251b0cc2f4:1">`--mail-from`</span><span data-offset-key="46075eee66f1424da26d72251b0cc2f4:2">. It is important to realize that this email address is not necessarily the same as is shown in the </span><span data-offset-key="46075eee66f1424da26d72251b0cc2f4:3">`From:`</span><span data-offset-key="46075eee66f1424da26d72251b0cc2f4:4"> line of the email text.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="6f90093d0e4e4cbfb3348a35ebfef7c7"><span data-offset-key="6f90093d0e4e4cbfb3348a35ebfef7c7:0">Then, you need to provide the actual email data. This is a (text) file formatted according to </span></span><a href="https://tools.ietf.org/html/rfc5322.html" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="9fa503971cd94d718485867f9b42001c"><span data-offset-key="9fa503971cd94d718485867f9b42001c:0">RFC 5322</span></span></a><span data-key="e590bb5ace0748f8a82566d1cbdca421"><span data-offset-key="e590bb5ace0748f8a82566d1cbdca421:0">. It is a set of headers and a body. Both the headers and the body need to be correctly encoded. The headers typically include </span><span data-offset-key="e590bb5ace0748f8a82566d1cbdca421:1">`To:`</span><span data-offset-key="e590bb5ace0748f8a82566d1cbdca421:2">, </span><span data-offset-key="e590bb5ace0748f8a82566d1cbdca421:3">`From:`</span><span data-offset-key="e590bb5ace0748f8a82566d1cbdca421:4">, </span><span data-offset-key="e590bb5ace0748f8a82566d1cbdca421:5">`Subject:`</span><span data-offset-key="e590bb5ace0748f8a82566d1cbdca421:6">, </span><span data-offset-key="e590bb5ace0748f8a82566d1cbdca421:7">`Date:`</span><span data-offset-key="e590bb5ace0748f8a82566d1cbdca421:8"> etc.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="ac1dcbafab554eb181282c8d085bed3c"><span data-offset-key="ac1dcbafab554eb181282c8d085bed3c:0">A basic command to send an email:</span></span></span>

    curl smtp://mail.example.com --mail-from [email protected] --mail-rcpt[email protected] --upload-file email.txt

<span class="text-4505230f--HeadingH700-04e1a2a3--textContentFamily-49a318e1"><span data-key="a9dd41202e1742a3bd2f104256dafaa0"><span data-offset-key="a9dd41202e1742a3bd2f104256dafaa0:0">Example email.txt</span></span></span>

    From: John Smith <[email protected]>To: Joe Smith <[email protected]>Subject: an example.com example emailDate: Mon, 7 Nov 2016 08:45:16​Dear Joe,Welcome to this example email. What a lovely day.

<span class="text-4505230f--HeadingH700-04e1a2a3--textContentFamily-49a318e1"><span data-key="9c2b01de3d024f68a49efd6deea1d3c5"><span data-offset-key="9c2b01de3d024f68a49efd6deea1d3c5:0">Secure mail transfer</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="145f0cda19c842a28b4aded3030841be"><span data-offset-key="145f0cda19c842a28b4aded3030841be:0">Some mail providers allow or require using SSL for SMTP. They may use a dedicated port for SSL or allow SSL upgrading over a clear-text connection.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="bb63bd57fd2049fe9b5b253363f562ba"><span data-offset-key="bb63bd57fd2049fe9b5b253363f562ba:0">If your mail provider has a dedicated SSL port you can use smtps:// instead of smtp://, which uses the SMTP SSL port of 465 by default and requires the entire connection to be SSL. For example smtps://smtp.gmail.com/.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="1b3dba28dffe4d0ba119c0e366fd2b48"><span data-offset-key="1b3dba28dffe4d0ba119c0e366fd2b48:0">However, if your provider allows upgrading from clear-text to secure transfers you can use one of these options:</span></span></span>

    --ssl           Try SSL/TLS (FTP, IMAP, POP3, SMTP)--ssl-reqd      Require SSL/TLS (FTP, IMAP, POP3, SMTP)

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="68ef9e5bfcbd4a65b2c33681e97963d7"><span data-offset-key="68ef9e5bfcbd4a65b2c33681e97963d7:0">You can tell curl to </span><span data-offset-key="68ef9e5bfcbd4a65b2c33681e97963d7:1">*try*</span><span data-offset-key="68ef9e5bfcbd4a65b2c33681e97963d7:2"> but not require upgrading to secure transfers by adding </span><span data-offset-key="68ef9e5bfcbd4a65b2c33681e97963d7:3">`--ssl`</span><span data-offset-key="68ef9e5bfcbd4a65b2c33681e97963d7:4"> to the command:</span></span></span>

    curl --ssl smtp://mail.example.com --mail-from [email protected]     --mail-rcpt [email protected] --upload-file email.txt     --user '[email protected]:your-account-password'

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="ddcc2b7391c049e9a18c41e8254839fb"><span data-offset-key="ddcc2b7391c049e9a18c41e8254839fb:0">You can tell curl to </span><span data-offset-key="ddcc2b7391c049e9a18c41e8254839fb:1">*require*</span><span data-offset-key="ddcc2b7391c049e9a18c41e8254839fb:2"> upgrading to using secure transfers by adding </span><span data-offset-key="ddcc2b7391c049e9a18c41e8254839fb:3">`--ssl-reqd`</span><span data-offset-key="ddcc2b7391c049e9a18c41e8254839fb:4"> to the command:</span></span></span>

    curl --ssl-reqd smtp://mail.example.com --mail-from [email protected]     --mail-rcpt [email protected] --upload-file email.txt     --user '[email protected]:your-account-password'

<span class="text-4505230f--HeadingH700-04e1a2a3--textContentFamily-49a318e1"><span data-key="7cc9f195cf124c4fb063b348b6444662"><span data-offset-key="7cc9f195cf124c4fb063b348b6444662:0">The SMTP URL</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="7e1d712125654f4784a3b4a947e0d611"><span data-offset-key="7e1d712125654f4784a3b4a947e0d611:0">The path part of a SMTP request specifies the host name to present during communication with the mail server. If the path is omitted then curl will attempt to figure out the local computer's host name and use that. However, this may not return the fully qualified domain name that is required by some mail servers and specifying this path allows you to set an alternative name, such as your machine's fully qualified domain name, which you might have obtained from an external function such as gethostname or getaddrinfo.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="8466a34669534cdaa1e139854bcefa1b"><span data-offset-key="8466a34669534cdaa1e139854bcefa1b:0">To connect to the mail server at </span><span data-offset-key="8466a34669534cdaa1e139854bcefa1b:1">`mail.example.com`</span><span data-offset-key="8466a34669534cdaa1e139854bcefa1b:2"> and send your local computer's host name in the HELO / EHLO command:</span></span></span>

    curl smtp://mail.example.com

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="573d96b338a94b0b884c44859cb08ee3"><span data-offset-key="573d96b338a94b0b884c44859cb08ee3:0">You can of course as always use the </span><span data-offset-key="573d96b338a94b0b884c44859cb08ee3:1">`-v`</span><span data-offset-key="573d96b338a94b0b884c44859cb08ee3:2"> option to get to see the client-server communication.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="d9d7a3055dfd41aab6fb7481c6ca6135"><span data-offset-key="d9d7a3055dfd41aab6fb7481c6ca6135:0">To instead have curl send </span><span data-offset-key="d9d7a3055dfd41aab6fb7481c6ca6135:1">`client.example.com`</span><span data-offset-key="d9d7a3055dfd41aab6fb7481c6ca6135:2"> in the </span><span data-offset-key="d9d7a3055dfd41aab6fb7481c6ca6135:3">`HELO`</span><span data-offset-key="d9d7a3055dfd41aab6fb7481c6ca6135:4"> / </span><span data-offset-key="d9d7a3055dfd41aab6fb7481c6ca6135:5">`EHLO`</span><span data-offset-key="d9d7a3055dfd41aab6fb7481c6ca6135:6"> command to the mail server at </span><span data-offset-key="d9d7a3055dfd41aab6fb7481c6ca6135:7">`mail.example.com`</span><span data-offset-key="d9d7a3055dfd41aab6fb7481c6ca6135:8">, use:</span></span></span>

    curl smtp://mail.example.com/client.example.com

<span class="text-4505230f--HeadingH700-04e1a2a3--textContentFamily-49a318e1"><span data-key="5f97e7c2ab8b433f913fa03319bb3ca4"><span data-offset-key="5f97e7c2ab8b433f913fa03319bb3ca4:0">No MX lookup!</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="bcfe59daac3a4f77915ca40aca37f028"><span data-offset-key="bcfe59daac3a4f77915ca40aca37f028:0">When you send email with an ordinary mail client, it will first check for an MX record for the particular domain you want to send email to. If you send an email to <a href="../cdn-cgi/l/email-protection.html" class="__cf_email__">[email protected]</a>, the client will get the MX records for </span><span data-offset-key="bcfe59daac3a4f77915ca40aca37f028:1">`example.com`</span><span data-offset-key="bcfe59daac3a4f77915ca40aca37f028:2"> to learn which mail server(s) to use when sending email to example.com users.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="e11462ba770b47919f41e1b4086045ec"><span data-offset-key="e11462ba770b47919f41e1b4086045ec:0">curl does no MX lookups by itself. If you want to figure out which server to send an email to for a particular domain, we recommend you figure that out first and then call curl to use those servers. Useful command line tools to get MX records include 'dig' and 'nslookup'.</span></span></span>

<a href="reademail.html" class="reset-3c756112--card-6570f064--whiteCard-fff091a4--cardPrevious-56a5e674"></a>

<span class="text-4505230f--TextH200-a3425406--textContentFamily-49a318e1">Previous</span>

<span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1">Reading email</span>

<a href="mqtt.html" class="reset-3c756112--card-6570f064--whiteCard-fff091a4--cardNext-19241c42"></a>

<span class="text-4505230f--TextH200-a3425406--textContentFamily-49a318e1">Next</span>

<span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1">MQTT</span>

<img src="https://avatars.githubusercontent.com/u/66654881?v=4" class="image-67b14f24--avatar-1c1d03ec" />

<span class="text-4505230f--TextH200-a3425406--textContentFamily-49a318e1">Last updated 11 months ago</span>

<span class="text-4505230f--UIH300-2063425d--textUIFamily-5ebd8e40">Export as PDF</span>

<span class="text-4505230f--InfoH100-1e92e1d1--textContentFamily-49a318e1">Contents</span>

<a href="smtp.html#example-email-txt" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024"></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1"><span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1">Example email.txt</span></span>

<a href="smtp.html#secure-mail-transfer" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024"></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1"><span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1">Secure mail transfer</span></span>

<a href="smtp.html#the-smtp-url" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024"></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1"><span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1">The SMTP URL</span></span>

<a href="smtp.html#no-mx-lookup" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024"></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1"><span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1">No MX lookup!</span></span>
